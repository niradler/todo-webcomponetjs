<!-- Defines element markup -->
<template id="create">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   <form class="form-horizontal">
       <div class="container">

      
<fieldset>

<!-- Form Name -->
<legend>Form Name</legend>

<!-- Text input-->
<div class="form-group">
  <label class="col-md-4 control-label" for="todo">Todo</label>  
  <div class="col-md-4">
  <input id="todo" name="todo" type="text" placeholder="" class="form-control input-md">
  </div>
</div>

<!-- Button -->
<div class="form-group">
  <div class="col-md-4">
    <div id="add" name="add" class="btn btn-primary" >Add</div>
  </div>
</div>

</fieldset>
</form>
 </div>

</template>

<script>
    (function(window, document, undefined) {



        // Refers to the "importer", which is index.html
        var thatDoc = document;

        // Refers to the "importee", which is src/hello-world.html
        var thisDoc = (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

        // Gets content from <template>
        var template = thisDoc.querySelector('template').content;

        // Creates an object based in the HTML Element prototype
        var MyElementProto = Object.create(HTMLElement.prototype);

        // Creates the "who" attribute and sets a default value


        // Fires when an instance of the element is created
        MyElementProto.createdCallback = function() {

            // Creates the shadow root
            // var shadowRoot = this.createShadowRoot();

            var shadowRoot = this.attachShadow({
                    mode: "open"
                })
                // Adds a template clone into shadow root
            var clone = thatDoc.importNode(template, true);
            shadowRoot.appendChild(clone);
            var btn = shadowRoot.querySelector('#add');
            // Handle the button's click event
            btn.addEventListener('click', this.btnClick.bind(this));

        };
        MyElementProto.btnClick = function() {
            this.dispatchEvent(new Event('btn-clicked'));
        };
        // Fires when an attribute was added, removed, or updated
        MyElementProto.attributeChangedCallback = function(attr, oldVal, newVal) {

        };

        // Registers <hello-world> in the main document
        window.MyElement = thatDoc.registerElement('create-todo', {
            prototype: MyElementProto
        });
    })(window, document);


    var create = document.querySelector('create-todo');
    create.addEventListener('btn-clicked', function(evt) {
        window.storeTodo(create.shadowRoot.querySelector("#todo").value);
        create.shadowRoot.querySelector("#todo").value = "";
    });;
</script>